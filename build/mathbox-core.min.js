!function t(e,r,n){function i(u,s){if(!r[u]){if(!e[u]){var c="function"==typeof require&&require;if(!s&&c)return c(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+u+"'")}var a=r[u]={exports:{}};e[u][0].call(a.exports,function(t){var r=e[u][1][t];return i(r?r:t)},a,a.exports,t,e,r,n)}return r[u].exports}for(var o="function"==typeof require&&require,u=0;u<n.length;u++)i(n[u]);return i}({1:[function(t,e){var r,n,i,o;o=t("./stage"),i=t("./render"),n=t("./primitives"),r=function(){function t(t,e,r,u){null==u&&(u=[]),this.renderables=new i.Factory(t,i.Types.Classes),this.attributes=new n.Attributes(n.Types.Traits),this.primitives=new n.Factory(n.Types.Classes,this.attributes,this.renderables),this.model=new o.Model(r),this.scene=new i.Scene(e,r),this.controller=new o.Controller(this.model,this.scene,this.primitives),this.animator=new o.Animator(this.model),this.director=new o.Director(this.controller,this.animator,u),this.api=new o.API(this.controller,this.animator,this.director)}return t.prototype.init=function(){return this.scene.inject()},t.prototype.destroy=function(){return this.scene.unject()},t.prototype.update=function(){return this.animator.update(),this.attributes.digest()},t}(),e.exports=r},{"./primitives":5,"./render":22,"./stage":32}],2:[function(t,e,r){var n,i;i=function(t){var e;return null==t&&(t={}),null==t.plugins&&(t.plugins=["core","mathbox"]),e=THREE.Bootstrap(t),e.mathbox},window.MathBox=r,window.mathBox=r.mathBox=i,r.version="2",n=t("./context"),THREE.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0},listen:["ready","update"],install:function(t){var e;return e=!1,t.MathBox={init:function(r){return function(i){var o,u,s;if(!e)return e=!0,u=(null!=i?i.scene:void 0)||r.options.scene||t.scene,o=(null!=i?i.camera:void 0)||r.options.camera||t.camera,s=(null!=i?i.script:void 0)||r.options.script,r.context=new n(t.renderer.context,u,o,s),r.context.api.three=t,t.mathbox=r.context.api,r.context.init()}}(this),destroy:function(r){return function(){return e?(e=!1,r.context.destroy(),delete t.mathbox,delete r.context.api.three,delete r.context):void 0}}(this),object:function(){var t;return null!=(t=this.context)?t.scene.getRoot():void 0}}},uninstall:function(t){return t.MathBox.destroy(),delete t.MathBox},ready:function(t,e){return this.options.init?e.MathBox.init():void 0},update:function(){var t;return null!=(t=this.context)?t.update():void 0}})},{"./context":1}],3:[function(t,e){var r,n;r=function(){function t(t){this.traits=t,this.pending=[]}return t.prototype.getSpec=function(t){return this.traits[t]},t.prototype.queue=function(t){return this.pending.push(t)},t.prototype.apply=function(t,e){return null==e&&(e=[]),new n(t,e,this)},t.prototype.digest=function(){var t,e,r,n,i,o;for(r=10;this.pending.length>0&&--r>0;)for(o=[this.pending,[]],e=o[0],this.pending=o[1],n=0,i=e.length;i>n;n++)(t=e[n])();if(0===r)throw console.error("While digesting: ",object),Error("Infinite loop in Data::digest")},t}(),n=function(){function t(t,e,r){var n,i,o,u,s,c,a,l,p,h,f,d,y,v,m,_,g,x;for(null==e&&(e=[]),s=function(t){return function(e){return t[e].value}}(this),h=function(t){return function(e,r,i){var o;return o=y(e,r,t[e].value),null!=o&&(t[e].value=o),i?void 0:n(e)}}(this),t.get=function(t){var e,r;if(null==t){e={};for(t in this)r=this[t],e[t]=r.value;return e}return null!=v[t]?s(t):void 0},t.set=function(t,e,r){var n;if(null!=t&&null!=e)null!=v[t]&&h(t,e,r);else{n=t;for(t in n)e=n[t],null!=v[t]&&h(t,e,r)}},a={},v={},y=function(t,e,r){return v[t](e,r)},t.validate=function(t,e){var r,n,i;return r=a[t],null!=r&&(i=r()),n=y(t,e,i),null!=n?n:i},u=!1,i={},n=function(t){return function(e){return u||(u=!0,r.queue(o)),i[e]=t[e].value}}(this),o=function(){var e;return e=i,i={},u=!1,t.trigger({type:"change",changed:e})},m={},_=0,g=e.length;g>_;_++){d=e[_],x=d.split(":"),d=x[0],l=x[1],null==l&&(l=d),f=r.getSpec(d);for(c in f)p=f[c],c=[l,c].join("."),this[c]={type:"function"==typeof p.uniform?p.uniform():void 0,value:p.make()},n(c),a[c]=p.make,v[c]=p.validate}}return t}(),e.exports=r},{}],4:[function(t,e){var r;r=function(){function t(t,e,r){this.classes=t,this.attributes=e,this.renderables=r}return t.prototype.getTypes=function(){return Object.keys(this.classes)},t.prototype.make=function(t,e){return new this.classes[t](e,this.attributes,this.renderables)},t}(),e.exports=r},{}],5:[function(t,e,r){r.Factory=t("./factory"),r.Primitive=t("./primitive"),r.Attributes=t("./attributes"),r.Types=t("./types")},{"./attributes":3,"./factory":4,"./primitive":6,"./types":10}],6:[function(t,e){var r;r=function(){function t(t,e,r){this._factory=r,this._attributes=e.apply(this,this.traits),this.parent=null,this.root=null,this.set(t,null,!0),this.on("change",function(t){return function(e){return t.root?t._change(e.changed):void 0}}(this))}return t.prototype.rebuild=function(){return this.root?(this._unmake(),this._make()):void 0},t.prototype._make=function(){},t.prototype._unmake=function(){},t.prototype._change=function(){},t.prototype._added=function(t){return this.parent=t,this.root=t.root,this._make()},t.prototype._removed=function(){return this._unmake(),this.root=this.parent=null},t.prototype._extend=function(){return null==this.traits&&(this.traits=[]),this.traits=[].concat.apply(this.traits,arguments)},t.prototype._render=function(t){return this.trigger({type:"render",object:t})},t.prototype._unrender=function(t){return this.trigger({type:"unrender",object:t})},t}(),THREE.Binder.apply(r.prototype),e.exports=r},{}],7:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=t("./view"),r=function(t){function e(t,r,n){e.__super__.constructor.call(this,t,r,n)}return o(e,t),e}(n),e.exports=r},{"./view":12}],8:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=t("../primitive"),r=function(t){function e(t,r,n){this._extend("line","object","view","grid","axis:axis1","axis:axis2"),e.__super__.constructor.call(this,t,r,n),this.line1=null,this.line2=null,this.ticks1=null,this.ticks2=null}return o(e,t),e.prototype._make=function(){var t;return this.ticks1=this._factory.make("linebuffer"),this.ticks2=this._factory.make("linebuffer"),t={lineWidth:this._attributes["line.width"],lineColor:this._attributes["line.color"]},this.line1=this._factory.make("line",t),this.line2=this._factory.make("line",t),this._render(this.line1),this._render(this.line2)},e.prototype._unmake=function(){return null!=this.line1&&this._unrender(this.line1),null!=this.line2&&this._unrender(this.line2),this.line1=null,this.line2=null},e.prototype.change=function(){},e}(n),e.exports=r},{"../primitive":6}],9:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=t("../primitive"),r=function(t){function e(t,r,n){this.children=[],e.__super__.constructor.call(this,t,r,n)}return o(e,t),e.prototype.add=function(t){return this.children.push(t),t._added(this)},e.prototype.remove=function(t){var e;return this.children=function(){var r,n,i,o;for(i=this.children,o=[],r=0,n=i.length;n>r;r++)e=i[r],e!==t&&o.push(e);return o}.call(this),t._removed(this)},e}(n),e.exports=r},{"../primitive":6}],10:[function(t,e,r){var n,i,o;n={root:t("./root"),group:t("./group"),view:t("./view"),cartesian:t("./cartesian"),grid:t("./grid")},o={array:function(t,e){return{uniform:function(){return t.uniform()+"v"},make:function(){var r,n,i;for(i=[],r=n=0;e>=0?e>n:n>e;r=e>=0?++n:--n)i.push(t.make());return i},validate:function(r,n){var i,o,u,s,c,a;if(null!=r.constructor&&r.constructor===Array)for(n.length=e?e:r.length,i=u=0,c=n.length;c>=0?c>u:u>c;i=c>=0?++u:--u)o=t.validate(r[i],n[i]),null!=o&&(n[i]=o);else for(n.length=e,i=s=0,a=n.length;a>=0?a>=s:s>=a;i=a>=0?++s:--s)n[i]=t.value}}},bool:function(t){return{uniform:function(){return"f"},make:function(){return!!t},validate:function(t){return!!t}}},number:function(t){return null==t&&(t=0),{uniform:function(){return"f"},make:function(){return+t},validate:function(t){return+t||0}}},string:function(t){return null==t&&(t=""),{make:function(){return""+t},validate:function(t){return""+t}}},scale:function(t){return new o.string(t)},vec2:function(t,e){return null==t&&(t=0),null==e&&(e=0),{uniform:function(){return"v2"},make:function(){return new THREE.Vector2(t,e)},validate:function(r,n){var i,o;r instanceof THREE.Vector2?n.copy(r):(null!=r?r.constructor:void 0)===Array?n.set(null!=(i=r[0])?i:t,null!=(o=r[1])?o:e):n.set(t,e)}}},vec3:function(t,e,r){return null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),{uniform:function(){return"v3"},make:function(){return new THREE.Vector3(t,e,r)},validate:function(n,i){var o,u,s;n instanceof THREE.Vector3?i.copy(n):(null!=n?n.constructor:void 0)===Array?i.set(null!=(o=n[0])?o:t,null!=(u=n[1])?u:e,null!=(s=n[2])?s:r):i.set(t,e,r)}}},vec4:function(t,e,r,n){return null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),null==n&&(n=0),{uniform:function(){return"v4"},make:function(){return new THREE.Vector4(t,e,r,n)},validate:function(i,o){var u,s,c,a;i instanceof THREE.Vector4?o.copy(i):(null!=i?i.constructor:void 0)===Array?o.set(null!=(u=i[0])?u:t,null!=(s=i[1])?s:e,null!=(c=i[2])?c:r,null!=(a=i[3])?a:n):o.set(t,e,r,n)}}},quat:function(t,e,r,n){var i;return null==t&&(t=0),null==e&&(e=0),null==r&&(r=0),null==n&&(n=1),i=o.vec4(t,e,r,n),{uniform:function(){return"v4"},make:function(){return new THREE.Quaternion},validate:function(t,e){var r;return t instanceof THREE.Quaternion?e.copy(t):r=i.validate(t,e),(null!=r?r:e).normalize(),r}}},color:function(t,e,r){var n;return null==t&&(t=.5),null==e&&(e=.5),null==r&&(r=.5),n=o.vec3(t,e,r),{uniform:function(){return"v3"},make:function(){return new THREE.Vector3},validate:function(t,e){return t===+t&&(t=new THREE.Color(t)),t instanceof THREE.Color?void e.set(t.r,t.g,t.b):n.validate(t,e)}}}},i={object:{visible:o.bool(),position:o.vec4(),rotation:o.quat(),scale:o.vec4(1,1,1,1)},line:{width:o.number(1),color:o.color()},surface:{color:o.color()},view:{range:o.array(o.vec2(-1,1),4)},grid:{axes:o.vec2(0,1)},axis:{inherit:o.bool(),ticks:o.number(10),unit:o.number(1),base:o.number(10),detail:o.number(2),scale:o.scale()}},r.Classes=n,r.Types=o,r.Traits=i},{"./cartesian":7,"./grid":8,"./group":9,"./root":11,"./view":12}],11:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./group"),n=function(t){function e(t,r,n){e.__super__.constructor.call(this,t,r,n),this.root=this}return o(e,t),e}(r),e.exports=n},{"./group":9}],12:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./group"),n=function(t){function e(t,r,n){this._extend("object","view"),e.__super__.constructor.call(this,t,r,n)}return o(e,t),e}(r),e.exports=n},{"./group":9}],13:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};n=t("../renderable"),r=function(t){function e(t){this.gl=t,this.build()}var r;return o(e,t),r=65535,e.prototype.build=function(){return this.data=new Float32Array(4*this.samples)},e.prototype.generate=function(){var t,e,r,n,i;return r=4*this.samples,t=this.data,e=!1,i=0,n=function(n,o,u,s){return e||(t[i++]=n||0,t[i++]=o||0,t[i++]=u||0,t[i++]=s||0),!(e=i>=r)}},e.prototype.iterate=function(){},e.prototype.write=function(){},e.prototype.update=function(){return this.iterate(),this.write()},e.prototype.dispose=function(){return this.data=null,this.texture.dispose(),e.__super__.dispose.apply(this,arguments)},e}(n),e.exports=r},{"../renderable":25}],14:[function(t,e,r){r.Texture=t("./texture"),r.Buffer=t("./buffer"),r.LineBuffer=t("./linebuffer"),r.SurfaceBuffer=t("./surfacebuffer")},{"./buffer":13,"./linebuffer":15,"./surfacebuffer":16,"./texture":17}],15:[function(t,e){var r,n,i,o={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./buffer"),i=t("./texture"),n=function(t){function e(t,e){this.gl=t,this.callback=e.callback||function(){},this.width=e.width||1,this.history=e.history||1,this.samples=this.width,this.build()}return u(e,t),e.prototype.build=function(){return e.__super__.build.apply(this,arguments),this.texture=new i(this.gl,this.samples,this.history),this.index=0,this.uniforms={dataPointer:{type:"v2",value:new THREE.Vector2}},this.dataPointer=this.uniforms.dataPointer.value,this._adopt(this.texture.uniforms)},e.prototype.iterate=function(){var t,e,n;for(t=this.callback,n=this.generate(),e=0;t(e++,n)&&e<r.iterationLimit;);},e.prototype.write=function(){return this.dataPointer.set(.5,this.index+.5),this.texture.write(this.data,0,this.index,this.samples,1),this.index=(this.index+1)%this.history},e}(r),e.exports=n},{"./buffer":13,"./texture":17}],16:[function(t,e){var r,n,i,o={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./buffer"),i=t("./texture"),n=function(t){function e(t,e){this.gl=t,this.callback=e.callback||function(){},this.width=e.width||1,this.height=e.height||1,this.history=e.history||1,this.samples=this.width*this.height,this.build()}return u(e,t),e.prototype.build=function(){return e.__super__.build.apply(this,arguments),this.texture=new i(this.gl,this.width,this.height*this.history),this.index=0,this.uniforms={dataPointer:{type:"v2",value:new THREE.Vector2}},this.dataPointer=this.uniforms.dataPointer.value,this._adopt(this.texture.uniforms)},e.prototype.iterate=function(){var t,e,n,i,o,u,s;for(t=this.callback,u=this.generate(),o=this.width,e=n=i=0;++i<r.iterationLimit&&(s=t(e,n,u));)++e===o&&(e=0,n++)},e.prototype.write=function(){return this.dataPointer.set(.5,this.index+.5),this.texture.write(this.data,0,this.index,this.samples,1),this.index=(this.index+1)%this.history},e}(r),e.exports=n},{"./buffer":13,"./texture":17}],17:[function(t,e){var r;r=function(){function t(t,e,r){this.gl=t,this.w=e,this.h=r,this.n=this.w*this.h*4,this.build()}return t.prototype.build=function(){var t;return t=this.gl,this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this.data=new Float32Array(this.n),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.w,this.h,0,t.RGBA,t.FLOAT,this.data),this.textureObject=new THREE.Texture(new Image,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter),this.textureObject.__webglInit=!0,this.textureObject.__webglTexture=texture,this.uniforms={dataResolution:{type:"v2",value:new THREE.Vector2(1/this.w,1/this.h)},dataTexture:{type:"t",value:this.textureObject}}},t.prototype.write=function(t,e,r,n,i){var o;return o=this.gl,o.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_ALIGNMENT,1),o.texSubImage2D(o.TEXTURE_2D,0,e,r,n,i,o.RGBA,o.FLOAT,t)},t.prototype.dispose=function(){throw"Texture::dispose not yet implemented"},t}(),e.exports=r},{}],18:[function(t,e){var r;r=function(){function t(t,e){this.gl=t,this.classes=e}return t.prototype.getTypes=function(){return Object.keys(this.classes)},t.prototype.make=function(t,e,r){return new this.classes[t](this.gl,e,r)},t}(),e.exports=r},{}],19:[function(t,e){var r,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=function(t){function e(){THREE.BufferGeometry.call(this)}return i(e,t),e.prototype._emitter=function(t){var e,r,n,i,o,u,s,c;return r=this.attributes[t],e=r.array,i=r.itemSize,o=0,u=function(t){return e[o++]=t},c=function(t,r){return e[o++]=t,e[o++]=r},s=function(t,r,n){return e[o++]=t,e[o++]=r,e[o++]=n},n=function(t,r,n,i){return e[o++]=t,e[o++]=r,e[o++]=n,e[o++]=i},[null,u,c,s,n][itemSize]},e}(THREE.BufferGeometry),e.exports=r},{}],20:[function(t,e,r){r.Geometry=t("./geometry"),r.LineGeometry=t("./linegeometry")},{"./geometry":19,"./linegeometry":21}],21:[function(t,e){var r,n,i={}.hasOwnProperty,o=function(t,e){function r(){this.constructor=t}for(var n in e)i.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=t("./geometry"),n=function(t){function e(t){var e,r,n,i,o,u,s,c,a,l,p,h,f,d,y,v,m,_,g,x,b,w,E;for(THREE.BufferGeometry.call(this),p=+t.samples||2,f=+t.strips||1,l=+t.ribbons||1,h=p-1,c=p*f*l,d=2*h*f*l,this.addAttribute("index",Uint16Array,3*d,1),this.addAttribute("position",Float32Array,c,3),this.addAttribute("line",Float32Array,c,2),i=this._emitter("index"),a=this._emitter("position"),s=this._emitter("line"),e=0,n=m=0;l>=0?l>m:m>l;n=l>=0?++m:--m){for(o=_=0;f>=0?f>_:_>f;o=f>=0?++_:--_){for(u=g=0,E=p-1;E>=0?E>g:g>E;u=E>=0?++g:--g)i(e),i(e+1),i(e+2),i(e+2),i(e+1),i(e+3);e+=2}e+=2}for(n=x=0;l>=0?l>x:x>l;n=l>=0?++x:--x){for(v=0,o=b=0;f>=0?f>b:b>f;o=f>=0?++b:--b)for(y=0,u=w=0;p>=0?p>w:w>p;u=p>=0?++w:--w)r=0===u?-1:u===h?1:0,a(y,v,0),a(y,v,0),s(r,1),s(r,-1),y++;v++}}return o(e,t),e}(r),e.exports=n},{"./geometry":19}],22:[function(t,e,r){r.Scene=t("./scene"),r.Factory=t("./factory"),r.Renderable=t("./scene"),r.Types=t("./types")},{"./factory":18,"./scene":26,"./types":27}],23:[function(t,e,r){r.Line=t("./line")},{"./line":24}],24:[function(t,e){var r,n,i,o={}.hasOwnProperty,u=function(t,e){function r(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};i=t("../renderable"),n=t("../geometry").LineGeometry,r=function(t){function e(t,e,r){var i;this.gl=t,this.options=e,this._map(r,["lineWidth","lineColor"]),i=new n({samples:2,strips:1,ribbons:1})}return u(e,t),e.prototype.dispose=function(){return e.__super__.dispose.apply(this,arguments)},e}(i),e.exports=r},{"../geometry":20,"../renderable":25}],25:[function(t,e){var r;r=function(){function t(t){this.gl=t,null==this.uniforms&&(this.uniforms={})}return t.prototype.dispose=function(){return this.uniforms=null},t.prototype._adopt=function(t){var e,r,n;n=[];for(e in t)r=t[e],n.push(this.uniforms[e]=r);return n},t.prototype._map=function(t,e){var r,n;null==this.uniforms&&(this.uniforms={}),n=[];for(r in e)null!=t[r]&&n.push(this.uniforms[r]=t[r]);return n},t.prototype._set=function(t){var e,r,n;n=[];for(e in t)r=t[e],null!=this.uniforms[e]&&n.push(this.uniforms[e].value=r);return n},t}(),e.exports=r},{}],26:[function(t,e){var r,n={}.hasOwnProperty,i=function(t,e){function r(){this.constructor=t}for(var i in e)n.call(e,i)&&(t[i]=e[i]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};r=function(){function t(t,e){var r;this.scene=t,this.camera=e,r=function(t){function e(){THREE.Object3D.apply(this)}return i(e,t),e}(THREE.Object3D),this.root=new r}return t.prototype.getRoot=function(){return this.root},t.prototype.inject=function(){return this.scene.add(this.root)},t.prototype.unject=function(){return this.scene.remove(this.root)},t.prototype.add=function(t){return this.root.add(t)},t.prototype.remove=function(t){return this.root.remove(t)},t}(),e.exports=r},{}],27:[function(t,e,r){var n;n={line:t("./meshes").Line,linebuffer:t("./buffer").LineBuffer,surfacebuffer:t("./buffer").SurfaceBuffer},r.Classes=n},{"./buffer":14,"./meshes":23}],28:[function(t,e){var r;r=function(){function t(t){this.model=t}return t.prototype.update=function(){},t}(),e.exports=r},{}],29:[function(t,e){var r;r=function(){function t(t,e,r,n,i){var o,u,s,c;for(this._controller=t,this._animator=e,this._director=r,this._up=n,this._target=i,c=this._controller.getTypes(),u=0,s=c.length;s>u;u++)o=c[u],"root"!==o&&"group"!==o&&!function(t){return function(e){return t[e]=function(r){return t.add(e,r)}}}(this)(o);this._model=this._controller.model}return t.prototype.add=function(t,e){var r,n,i,o;return n=this._controller.make(t,e),i=null!=(o=this.target)?o:this._controller.getRoot(),n.children||i!==this._controller.getRoot()||(i=function(){var t,e,n,o;for(n=i.children,o=[],t=0,e=n.length;e>t;t++)r=n[t],null!=r.children&&o.push(r);return o}()[0]||i),this._controller.add(n,i),n.children?this.push(n):this},t.prototype.push=function(e){return new t(this._controller,this._animator,this._director,this,e)},t.prototype.end=function(){var t;return null!=(t=this._up)?t:this},t.prototype.reset=function(){return push({target:void 0})},t}(),e.exports=r},{}],30:[function(t,e){var r;r=function(){function t(t,e,r){this.model=t,this.scene=e,this.factory=r,this.model.setRoot(this.factory.make("root")),this.render=function(t){return function(e){return t.scene.add(e.renderable.object)}}(this),this.unrender=function(t){return function(e){return t.scene.remove(e.renderable.object)}}(this)}return t.prototype.getRoot=function(){return this.model.getRoot()},t.prototype.getTypes=function(){return this.factory.getTypes()},t.prototype.make=function(t,e){return this.factory.make(t,e)},t.prototype.add=function(t,e){return null==e&&(e=this.model.getRoot()),t.on("render",this.render),t.on("unrender",this.unrender),e.add(t)},t.prototype.remove=function(t){var e;return t.unmake(),e=t.parent||this.model.getRoot(),e.remove(t),t.off("render",this.render),t.off("unrender",this.unrender)},t}(),e.exports=r},{}],31:[function(t,e){var r;r=function(){function t(t,e){this.model=t,this.script=e}return t}(),e.exports=r},{}],32:[function(t,e,r){r.Animator=t("./animator"),r.API=t("./api"),r.Controller=t("./controller"),r.Director=t("./director"),r.Model=t("./model")},{"./animator":28,"./api":29,"./controller":30,"./director":31,"./model":33}],33:[function(t,e){var r;r=function(){function t(t){this.camera=t}return t.prototype.setRoot=function(t){this.root=t},t.prototype.getRoot=function(){return this.root},t}(),e.exports=r},{}]},{},[2]);