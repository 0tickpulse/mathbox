!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=n[s]={exports:{}};e[s][0].call(c.exports,function(t){var n=e[s][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(){window.MathBox.Shaders={"axis.position":"uniform vec4 axisStep;\nuniform vec4 axisPosition;\n\nvec4 getAxisPosition(vec2 uv) {\n  return axisStep * uv.x + axisPosition;\n}\n","cartesian.position":"uniform mat4 cartesianMatrix;\n\nvec4 getCartesianPosition(vec4 position) {\n  return cartesianMatrix * vec4(position.xyz, 1.0);\n}\n","grid.position":"uniform vec4 gridPosition;\nuniform vec4 gridStep;\nuniform vec4 gridAxis;\n\nvec4 sampleData(vec2 xy);\n\nvec4 getGridPosition(vec2 uv) {\n  vec4 onAxis  = gridAxis * sampleData(vec2(uv.y, 0.0));\n  vec4 offAxis = gridStep * uv.x + gridPosition;\n  return onAxis + offAxis;\n}\n","line.color":"uniform vec3 lineColor;\nuniform float lineOpacity;\n\nvoid setLineColor() {\n	gl_FragColor = vec4(lineColor, lineOpacity);\n}\n","line.position":"uniform float lineWidth;\nattribute vec2 line;\n\n// External\nvec3 getPosition(vec2 xy);\n\nvoid getLineGeometry(vec2 xy, float edge, inout vec3 left, inout vec3 center, inout vec3 right) {\n  vec2 delta = vec2(1.0, 0.0);\n\n  center =                 getPosition(xy);\n  left   = (edge > -0.5) ? getPosition(xy - delta) : center;\n  right  = (edge < 0.5)  ? getPosition(xy + delta) : center;\n}\n\nvec3 getLineJoin(float edge, vec3 left, vec3 center, vec3 right) {\n  vec3 bitangent;\n  vec3 normal = center;\n\n  vec3 legLeft = center - left;\n  vec3 legRight = right - center;\n\n  if (edge > 0.5) {\n    bitangent = normalize(cross(normal, legLeft));\n  }\n  else if (edge < -0.5) {\n    bitangent = normalize(cross(normal, legRight));\n  }\n  else {\n    vec3 joinLeft = normalize(cross(normal, legLeft));\n    vec3 joinRight = normalize(cross(normal, legRight));\n    float dotLR = dot(joinLeft, joinRight);\n    float scale = min(8.0, tan(acos(dotLR * .999) * .5) * .5);\n    bitangent = normalize(joinLeft + joinRight) * sqrt(1.0 + scale * scale);\n  }\n  \n  return bitangent;\n}\n\nvec3 getLinePosition() {\n  vec3 left, center, right, join;\n\n  float edge = line.x;\n  float offset = line.y;\n\n  getLineGeometry(position.xy, edge, left, center, right);\n  join = getLineJoin(edge, left, center, right);\n  return center + join * offset * lineWidth;\n}\n","project.position":"void setPosition(vec3 position) {\n  gl_Position = projectionMatrix * vec4(position, 1.0);\n}\n","sample.2d":"uniform sampler2D dataTexture;\nuniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec4 sampleData(vec2 xy) {\n  vec2 uv = fract((xy + dataPointer) * dataResolution);\n  return texture2D(dataTexture, uv);\n}\n","ticks.position":"uniform float tickSize;\nuniform vec4  tickAxis;\nuniform vec4  tickNormal;\n\nvec4 sampleData(vec2 xy);\n\nvec3 transformPosition(vec4 value);\n\nvec3 getTickPosition(vec2 xy) {\n\n  const float epsilon = 0.0001;\n  float line = xy.x * 2.0 - 1.0;\n\n  vec4 center = tickAxis * sampleData(vec2(xy.y, 0.0));\n  vec4 edge   = tickNormal * epsilon;\n\n  vec4 a = center;\n  vec4 b = center + edge;\n\n  vec3 c = transformPosition(a);\n  vec3 d = transformPosition(b);\n  \n  vec3 mid  = c;\n  vec3 side = normalize(d - c);\n\n  return mid + side * line * tickSize;\n}\n","view.position":"vec3 getViewPosition(vec4 position) {\n  return (modelViewMatrix * vec4(position.xyz, 1.0)).xyz;\n}"}},{}],2:[function(t,e){var n,i,r,o,s,a;i=t("./model"),a=t("./stage"),o=t("./render"),s=t("./shaders"),r=t("./primitives"),n=function(){function t(t,e,n,u){null==u&&(u=[]),this.shaders=new s.Factory(s.Snippets),this.scene=new o.Scene(e),this.renderables=new o.Factory(t,o.Classes,this.shaders),this.attributes=new i.Attributes(r.Traits,r.Types),this.primitives=new r.Factory(r.Classes,this.attributes,this.renderables,this.shaders),this.model=new i.Model(this.primitives.make("root")),this.controller=new a.Controller(this.model,this.scene,this.primitives),this.animator=new a.Animator(this.model),this.director=new a.Director(this.controller,this.animator,u),this.api=new a.API(this.controller,this.animator,this.director)}return t.prototype.init=function(){return this.scene.inject()},t.prototype.destroy=function(){return this.scene.unject()},t.prototype.update=function(){return this.animator.update(),this.attributes.digest()},t}(),e.exports=n},{"./model":6,"./primitives":11,"./render":33,"./shaders":42,"./stage":47}],3:[function(t,e,n){var i,r;r=function(t){var e;return null==t&&(t={}),null==t.plugins&&(t.plugins=["core","mathbox"]),e=THREE.Bootstrap(t),e.mathbox},window.MathBox=n,window.mathBox=n.mathBox=r,n.version="2",t("../build/shaders"),i=t("./context"),THREE.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0},listen:["ready","update"],install:function(t){var e;return e=!1,t.MathBox={init:function(n){return function(r){var o,s,a;if(!e)return e=!0,s=(null!=r?r.scene:void 0)||n.options.scene||t.scene,o=(null!=r?r.camera:void 0)||n.options.camera||t.camera,a=(null!=r?r.script:void 0)||n.options.script,n.context=new i(t.renderer.context,s,o,a),n.context.api.three=t,t.mathbox=n.context.api,n.context.init(),window.model=n.context.model,window.root=n.context.model.root}}(this),destroy:function(n){return function(){return e?(e=!1,n.context.destroy(),delete t.mathbox,delete n.context.api.three,delete n.context):void 0}}(this),object:function(){var t;return null!=(t=this.context)?t.scene.getRoot():void 0}}},uninstall:function(t){return t.MathBox.destroy(),delete t.MathBox},ready:function(t,e){return this.options.init?e.MathBox.init():void 0},update:function(){var t;return null!=(t=this.context)?t.update():void 0}})},{"../build/shaders":1,"./context":2}],4:[function(t,e){var n,i;n=function(){function t(t,e){this.traits=t,this.types=e,this.pending=[]}return t.prototype.make=function(t){return{type:"function"==typeof t.uniform?t.uniform():void 0,value:t.make()}},t.prototype.getSpec=function(t){return this.traits[t]},t.prototype.queue=function(t){return this.pending.push(t)},t.prototype.apply=function(t,e){return null==e&&(e=[]),new i(t,e,this)},t.prototype.digest=function(){var t,e,n,i,r,o;for(n=10;this.pending.length>0&&--n>0;)for(o=[this.pending,[]],e=o[0],this.pending=o[1],i=0,r=e.length;r>i;i++)(t=e[i])();if(0===n)throw console.error("While digesting: ",object),Error("Infinite loop in Data::digest")},t}(),i=function(){function t(t,e,n){var i,r,o,s,a,u,c,l,p,h,f,d,m,v,y,g,_,x,b;for(null==e&&(e=[]),u=function(t){return function(e){var n;return null!=(n=t[e])?n.value:void 0}}(this),f=function(t){return function(e,n,r){var o;return o=v(e,n,t[e].value),null!=o&&(t[e].value=o),r?void 0:i(e)}}(this),t.get=function(t){return function(e){var n,i;if(null!=e)return u(e);n={};for(e in t)i=t[e],n[e]=i.value;return n}}(this),t.set=function(t,e,n){var i;if(null!=t&&null!=e)null!=y[t]&&f(t,e,n);else{i=t;for(t in i)e=i[t],null!=y[t]&&f(t,e,n)}},l={},y={},v=function(t,e,n){return y[t](e,n)},t.validate=function(t,e){var n,i,r;return n=l[t],null!=n&&(r=n()),i=v(t,e,r),null!=i?i:r},s=!1,r={},i=function(t){return function(e){var i;return s||(s=!0,n.queue(o)),r[e]=t[e].value,i=e.split(".")[0],r[i]=!0}}(this),a={type:"change",changed:null},o=function(){return a.changed=r,r={},s=!1,t.trigger(a)},g={},_=0,x=e.length;x>_;_++){m=e[_],b=m.split(":"),m=b[0],p=b[1],null==p&&(p=m),d=n.getSpec(m);for(c in d)h=d[c],c=[p,c].join("."),this[c]={type:"function"==typeof h.uniform?h.uniform():void 0,value:h.make()},l[c]=h.make,y[c]=h.validate}}return t}(),e.exports=n},{}],5:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("./node"),n=function(t){function e(t,n,i,r){e.__super__.constructor.call(this,t,n,i,r),this.children=[]}return o(e,t),e.prototype.add=function(t){return this.children.push(t),t._added(this)},e.prototype.remove=function(t){var e;return this.children=function(){var n,i,r,o;for(r=this.children,o=[],n=0,i=r.length;i>n;n++)e=r[n],e!==t&&o.push(e);return o}.call(this),t._removed(this)},e}(i),e.exports=n},{"./node":8}],6:[function(t,e,n){n.Attributes=t("./attributes"),n.Group=t("./group"),n.Model=t("./model"),n.Node=t("./node")},{"./attributes":4,"./group":5,"./model":7,"./node":8}],7:[function(t,e){var n;n=function(){function t(t){this.root=t,this.root.model=this,this.root.root=this.root}return t.prototype.getRoot=function(){return this.root},t}(),THREE.Binder.apply(n.prototype),e.exports=n},{}],8:[function(t,e){var n;n=function(){function t(t,e,n,i){this.type=e,this.traits=null!=n?n:[],this.attributes=i.apply(this,this.traits),this.parent=null,this.root=null,this.set(t,null,!0)}return t.prototype._added=function(t){var e;return this.parent=t,this.root=t.root,e={type:"added",object:this,parent:this.parent},this.trigger(e),this.root!==this?this.root.model.trigger(e):void 0},t.prototype._removed=function(){var t;return this.root=this.parent=null,t={type:"removed",object:this},this.trigger(t),this.root!==this?this.root.model.trigger(t):void 0},t}(),THREE.Binder.apply(n.prototype),e.exports=n},{}],9:[function(t,e){var n;n=function(){function t(t,e,n,i){this.classes=t,this.attributes=e,this.renderables=n,this.shaders=i}return t.prototype.getTypes=function(){return Object.keys(this.classes)},t.prototype.make=function(t,e){var n,i,r,o;return i=this.classes[t],o=i.model,r=new o(e,t,i.traits,this.attributes),n=new i(r,this.attributes,this.renderables,this.shaders),r},t}(),e.exports=n},{}],10:[function(t,e){var n,i;n=t("../util"),i={setDimension:function(t,e){var n,i,r,o;return i=1===e?1:0,r=2===e?1:0,o=3===e?1:0,n=4===e?1:0,t.set(i,r,o,n)},setDimensionNormal:function(t,e){var n,i,r,o;return i=1===e?1:0,r=2===e?1:0,o=3===e?1:0,n=4===e?1:0,t.set(r,o+i,n,0)},getSpanRange:function(t,e){var n,i,r;return n=this._get(t+"span.inherit"),n&&this.inherit?(r=this.inherit.get("view.range"),i=r[e-1]):i=this._get(t+"span.range"),i},generateScale:function(t,e,i,r){var o,s,a,u,c;return s=this._get(t+"scale.divide"),c=this._get(t+"scale.unit"),o=this._get(t+"scale.base"),a=this._get(t+"scale.mode"),u=n.Ticks.make(a,i,r,s,c,o,!0,0),e.copy(u),u},setMeshVisible:function(t){var e,n;return e=1,this.model.attributes["style.opacity"]&&(e=this._get("style.opacity")),n=this._get("object.visible"),n&&e>0?t.show(1>e):t.hide()}},e.exports=function(t){var e,n,r;e={};for(n in i)r=i[n],e[n]=r.bind(t);return e}},{"../util":48}],11:[function(t,e,n){var i;i=t("./types"),n.Factory=t("./factory"),n.Primitive=t("./primitive"),n.Types=i.Types,n.Traits=i.Traits,n.Classes=i.Classes},{"./factory":9,"./primitive":12,"./types":17}],12:[function(t,e){var n,i,r;n=t("../model"),r=t("./helpers"),i=function(){function t(t,e,n,i){this.model=t,this._attributes=e,this._factory=n,this._shaders=i,this.model.primitive=this,this.model.on("change",function(t){return function(e){return t.root?t._change(e.changed):void 0}}(this)),this.model.on("added",function(t){return function(){return t._added()}}(this)),this.model.on("removed",function(t){return function(){return t._removed()}}(this)),this.inherited=[],this._helper=r(this),this._get=this.model.get.bind(this.model)}return t.Node=n.Node,t.Group=n.Group,t.model=t.Node,t.traits=[],t.prototype.rebuild=function(){return this.root?(this._unmake(),this._make(),this._change({},!0)):void 0},t.prototype._make=function(){},t.prototype._unmake=function(){},t.prototype._added=function(){return this.root=this.model.root,this.parent=this.model.parent.primitive,this._make(),this._change({},!0)},t.prototype._removed=function(){return this.root=null},t.prototype._render=function(t){return this.trigger({type:"render",renderable:t})},t.prototype._unrender=function(t){return this.trigger({type:"unrender",renderable:t})},t.prototype._transform=function(t){var e;return null!=(e=this.parent)?e._transform(t):void 0},t.prototype._change=function(){},t.prototype._listen=function(t,e){var n,i;if(t!==this)return n=function(t){return function(n){var i;return i=n.changed,t.root&&null!=i[e]?t._change(i):void 0}}(this),t.model.on("change",n),i=[t,n],this.inherited.push(i)},t.prototype._unlisten=function(t){var e,n;return n=t[0],e=t[1],n.model.off("change",e)},t.prototype._inherit=function(t,e){return null==e&&(e=this),null!=this.model.get(t)?(e._listen(this,t),this.model):null!=this.parent?this.parent._inherit(t,e):null},t.prototype._unherit=function(){var t,e,n,i;for(i=this.inherited,e=0,n=i.length;n>e;e++)t=i[e],this._unlisten(t);return this.inherited=[]},t}(),THREE.Binder.apply(i.prototype),e.exports=i},{"../model":6,"./helpers":10}],13:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../primitive"),n=function(t){function e(t,n,i,r){e.__super__.constructor.call(this,t,n,i,r),this.axisPosition=this.axisStep=this.resolution=this.line=null}return o(e,t),e.traits=["object","style","line","axis","span"],e.prototype._make=function(){var t,e,n,i,r,o;return this.inherit=this._inherit("view.range"),o=this._attributes.types,i={axisPosition:this._attributes.make(o.vec4()),axisStep:this._attributes.make(o.vec4())},this.axisPosition=i.axisPosition.value,this.axisStep=i.axisStep.value,n=this._shaders.shader(),n.call("axis.position",i),this._transform(n),t=this._get("axis.detail"),r=t+1,this.resolution=1/t,e={lineWidth:this.model.attributes["line.width"],lineColor:this.model.attributes["style.color"],lineOpacity:this.model.attributes["style.opacity"]},this.line=this._factory.make("line",{uniforms:e,samples:r,position:n}),this._render(this.line)},e.prototype._unmake=function(){return this._unrender(this.line),this.line.dispose(),this.line=null,this._unherit()},e.prototype._change=function(t,e){var n,i,r,o;return null!=t["axis.detail"]&&this.rebuild(),(null!=t["view.range"]||null!=t["axis.dimension"]||null!=t.span||e)&&(n=this._get("axis.dimension"),o=this._helper.getSpanRange("",n),r=o.x,i=o.y,this._helper.setDimension(this.axisPosition,n).multiplyScalar(r),this._helper.setDimension(this.axisStep,n).multiplyScalar((i-r)*this.resolution)),this._helper.setMeshVisible(this.line)},e}(i),e.exports=n},{"../primitive":12}],14:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("./view"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype._make=function(){var t;return t=this._attributes.types,this.uniforms={cartesianMatrix:this._attributes.make(t.mat4())},this.cartesianMatrix=this.uniforms.cartesianMatrix.value,this.rotationMatrix=new THREE.Matrix4},e.prototype._unmake=function(){return delete this.cartesianMatrix,delete this.rotationMatrix},e.prototype._change=function(){var t,e,n,i,r,o,s,a,u,c,l,p,h;return i=this._get("object.position"),s=this._get("object.scale"),r=this._get("object.rotation"),o=this._get("view.range"),l=o[0].x,p=o[1].x,h=o[2].x,t=o[0].y-l||1,e=o[1].y-p||1,n=o[2].y-h||1,a=s.x,u=s.y,c=s.z,this.cartesianMatrix.set(2*a/t,0,0,-(2*l+t)*a/t,0,2*u/e,0,-(2*p+e)*u/e,0,0,2*c/n,-(2*h+n)*c/n,0,0,0,1),this.rotationMatrix.makeRotationFromQuaternion(r),this.cartesianMatrix.multiplyMatrices(this.rotationMatrix,this.cartesianMatrix)},e.prototype.to=function(t){return t.applyMatrix4(this.cartesianMatrix)},e.prototype._transform=function(t){var e;return t.call("cartesian.position",this.uniforms),null!=(e=this.parent)?e._transform(t):void 0},e}(i),e.exports=n},{"./view":22}],15:[function(t,e){var n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../primitive"),r=t("./types"),n=function(t){function e(t,n,i,r){e.__super__.constructor.call(this,t,n,i,r),this.axes=[]}return s(e,t),e.traits=["object","style","line","grid","axis:x.axis","axis:y.axis","scale:x.scale","scale:y.scale","span:x.span","span:y.span"],e.EXCESS=2.5,e.prototype._make=function(){var t,n,i;return this.inherit=this._inherit("view.range"),t=function(t){return function(n,i){var r,o,s,a,u,c,l,p,h,f,d,m,v,y;return o=t._get(n+"axis.detail"),m=o+1,f=1/o,s=t._get(i+"scale.divide"),d=s*e.EXCESS,r=t._factory.make("databuffer",{samples:d,channels:1}),v=t._attributes.types,p={gridPosition:t._attributes.make(v.vec4()),gridStep:t._attributes.make(v.vec4()),gridAxis:t._attributes.make(v.vec4())},y={gridPosition:p.gridPosition.value,gridStep:p.gridStep.value,gridAxis:p.gridAxis.value},c=l=t._shaders.shader(),c.callback(),r.shader(c),c.join(),c.call("grid.position",p),t._transform(l),u={lineWidth:t.model.attributes["line.width"],lineColor:t.model.attributes["style.color"],lineOpacity:t.model.attributes["style.opacity"]},h=m-1,a=t._factory.make("line",{uniforms:u,samples:m,strips:1,ribbons:d,position:l}),t._render(a),{first:n,second:i,quads:h,resolution:f,line:a,buffer:r,uniforms:y}}}(this),n=this._get("grid.first"),i=this._get("grid.second"),n&&this.axes.push(t("x.","y.")),i&&this.axes.push(t("y.","x."))},e.prototype._unmake=function(){var t,e,n,i;for(i=this.axes,e=0,n=i.length;n>e;e++)t=i[e],t.buffer.dispose(),this._unrender(t.line),t.line.dispose();return this.axes=[]},e.prototype._change=function(t,e){var n,i,r,o,s,a,u,c,l,p,h;if(null!=t["x.axis.detail"]||null!=t["y.axis.detail"]||null!=t["grid.first"]||null!=t["grid.second"])return this.rebuild();for(i=function(t){return function(e,n,i,r,o){var s,a,u,c,l,p,h,f,d,m,v;return a=o.first,d=o.second,h=o.quads,f=o.resolution,u=o.line,s=o.buffer,v=o.uniforms,l=i.x,c=i.y,t._helper.setDimension(v.gridPosition,e).multiplyScalar(l),t._helper.setDimension(v.gridStep,e).multiplyScalar((c-l)*f),l=r.x,c=r.y,t._helper.setDimension(v.gridAxis,n),m=t._helper.generateScale(d,s,l,c),p=m.length,u.geometry.clip(0,p*h)}}(this),(t.x||t.y||t.grid||e)&&(n=this._get("grid.axes"),s=this._helper.getSpanRange("x.",n.x),a=this._helper.getSpanRange("y.",n.y),r=this._get("grid.first"),u=this._get("grid.second"),o=0,r&&(i(n.x,n.y,s,a,this.axes[0]),o=1),u&&i(n.y,n.x,a,s,this.axes[o])),p=this.axes,h=[],c=0,l=p.length;l>c;c++)i=p[c],h.push(this._helper.setMeshVisible(i.line));return h},e}(i),e.exports=n},{"../primitive":12,"./types":21}],16:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../primitive"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.model=i.Group,e}(i),e.exports=n},{"../primitive":12}],17:[function(t,e,n){var i,r,o,s;o=t("../../model"),s=o.Node,r=o.Group,i={axis:t("./axis"),grid:t("./grid"),cartesian:t("./cartesian"),group:t("./group"),root:t("./root"),ticks:t("./ticks"),view:t("./view")},n.Classes=i,n.Types=t("./types"),n.Traits=t("./traits")},{"../../model":6,"./axis":13,"./cartesian":14,"./grid":15,"./group":16,"./root":18,"./ticks":19,"./traits":20,"./types":21,"./view":22}],18:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./group"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.traits=["object"],e.prototype._transform=function(t){return t.call("view.position")},e}(n),e.exports=i},{"./group":16}],19:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("../primitive"),i=function(t){function e(t,n,i,r){e.__super__.constructor.call(this,t,n,i,r),this.tickAxis=this.tickNormal=this.resolution=this.line=null}return o(e,t),e.traits=["object","style","line","ticks","span","scale"],e.EXCESS=2.5,e.prototype._make=function(){var t,n,i,r,o,s,a;return this.inherit=this._inherit("view.range"),t=this._get("scale.divide"),this.resolution=s=t*e.EXCESS,this.buffer=this._factory.make("databuffer",{samples:s,channels:1}),a=this._attributes.types,o={tickSize:this.model.attributes["ticks.size"],tickAxis:this._attributes.make(a.vec4()),tickNormal:this._attributes.make(a.vec4())},this.tickAxis=o.tickAxis.value,this.tickNormal=o.tickNormal.value,i=r=this._shaders.shader(),i.split(),i.callback(),this._transform(r),i.join(),i.next(),i.callback(),this.buffer.shader(i),i.join(),i.join(),i.call("ticks.position",o),n={lineWidth:this.model.attributes["line.width"],lineColor:this.model.attributes["style.color"],lineOpacity:this.model.attributes["style.opacity"]},this.line=this._factory.make("line",{uniforms:n,samples:2,strips:1,ribbons:s,position:r}),this._render(this.line)},e.prototype._unmake=function(){return this._unrender(this.line),this.line.dispose(),this.line=null,this.tickAxis=this.tickNormal=null,this._unherit()},e.prototype._change=function(t,e){var n,i,r,o,s,a;return null!=t["scale.divide"]&&this.rebuild(),(null!=t["view.range"]||null!=t["ticks.dimension"]||null!=t.span||null!=t.scale||e)&&(n=this._get("ticks.dimension"),s=this._helper.getSpanRange("",n),r=s.x,i=s.y,this._helper.setDimension(this.tickAxis,n),this._helper.setDimensionNormal(this.tickNormal,n),a=this._helper.generateScale("",this.buffer,r,i),o=a.length,this.line.geometry.clip(0,2*o)),this._helper.setMeshVisible(this.line)},e}(n),e.exports=i},{"../primitive":12}],20:[function(t,e){var n,i;i=t("./types"),n={object:{position:i.vec4(),rotation:i.quat(),scale:i.vec4(1,1,1,1),visible:i.bool(!0)},style:{opacity:i.number(1),color:i.color()},data:{position:i.object(),color:i.object()},line:{width:i.number(.01)},view:{dimensions:i.number(3),range:i.array(i.vec2(-1,1),4)},span:{inherit:i.bool(!0),range:i.vec2(-1,1)},grid:{axes:i.vec2(1,2),first:i.bool(!0),second:i.bool(!0)},axis:{detail:i.number(1),dimension:i.number(1)},scale:{divide:i.number(10),unit:i.number(1),base:i.number(10),mode:i.scale()},ticks:{size:i.number(.05),dimension:i.number(1)}},e.exports=n},{"./types":21}],21:[function(t,e){var n;n={array:function(t,e){return{uniform:function(){return t.uniform()+"v"},make:function(){var n,i,r;for(r=[],n=i=0;e>=0?e>i:i>e;n=e>=0?++i:--i)r.push(t.make());return r},validate:function(n,i){var r,o,s,a,u,c;if(null!=n.constructor&&n.constructor===Array)for(i.length=e?e:n.length,r=s=0,u=i.length;u>=0?u>s:s>u;r=u>=0?++s:--s)o=t.validate(n[r],i[r]),null!=o&&(i[r]=o);else for(i.length=e,r=a=0,c=i.length;c>=0?c>=a:a>=c;r=c>=0?++a:--a)i[r]=t.value}}},bool:function(t){return{uniform:function(){return"f"},make:function(){return!!t},validate:function(t){return!!t}}},number:function(t){return null==t&&(t=0),{uniform:function(){return"f"},make:function(){return+t},validate:function(t){return+t||0}}},string:function(t){return null==t&&(t=""),{make:function(){return""+t},validate:function(t){return""+t}}},scale:function(){return new n.string("linear")},object:function(){return{make:function(){return{}},validate:function(t){return t}}},vec2:function(t,e){var n;return null==t&&(t=0),null==e&&(e=0),n=[t,e],{uniform:function(){return"v2"},make:function(){return new THREE.Vector2(t,e)},validate:function(i,r){i instanceof THREE.Vector2?r.copy(i):(null!=i?i.constructor:void 0)===Array?(i=i.concat(n.slice(i.length)),r.set.apply(r,i)):r.set(t,e)}}},vec3:function(t,e,n){var i;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),i=[t,e,n],{uniform:function(){return"v3"},make:function(){return new THREE.Vector3(t,e,n)},validate:function(r,o){r instanceof THREE.Vector3?o.copy(r):(null!=r?r.constructor:void 0)===Array?(r=r.concat(i.slice(r.length)),o.set.apply(o,r)):o.set(t,e,n)}}},vec4:function(t,e,n,i){var r;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=0),null==i&&(i=0),r=[t,e,n,i],{uniform:function(){return"v4"},make:function(){return new THREE.Vector4(t,e,n,i)},validate:function(o,s){o instanceof THREE.Vector4?s.copy(o):(null!=o?o.constructor:void 0)===Array?(o=o.concat(r.slice(o.length)),s.set.apply(s,o)):s.set(t,e,n,i)}}},mat4:function(t,e,n,i,r,o,s,a,u,c,l,p,h,f,d,m){var v;return null==t&&(t=1),null==e&&(e=0),null==n&&(n=0),null==i&&(i=0),null==r&&(r=0),null==o&&(o=1),null==s&&(s=0),null==a&&(a=0),null==u&&(u=0),null==c&&(c=0),null==l&&(l=1),null==p&&(p=0),null==h&&(h=0),null==f&&(f=0),null==d&&(d=0),null==m&&(m=1),v=[t,e,n,i,r,o,s,a,u,c,l,p,h,f,d,m],{uniform:function(){return"m4"},make:function(){return new THREE.Matrix4(t,e,n,i,r,o,s,a,u,c,l,p,h,f,d,m)},validate:function(y,g){y instanceof THREE.Matrix4?g.copy(y):(null!=y?y.constructor:void 0)===Array?(y=y.concat(v.slice(y.length)),g.set.apply(g,y)):g.set(t,e,n,i,r,o,s,a,u,c,l,p,h,f,d,m)}}},quat:function(t,e,i,r){var o;return null==t&&(t=0),null==e&&(e=0),null==i&&(i=0),null==r&&(r=1),o=n.vec4(t,e,i,r),{uniform:function(){return"v4"},make:function(){return new THREE.Quaternion},validate:function(t,e){var n;return t instanceof THREE.Quaternion?e.copy(t):n=o.validate(t,e),(null!=n?n:e).normalize(),n}}},color:function(t,e,i){var r;return null==t&&(t=.5),null==e&&(e=.5),null==i&&(i=.5),r=n.vec3(t,e,i),{uniform:function(){return"v3"},make:function(){return new THREE.Vector3(t,e,i)},validate:function(t,e){var n;return t===""+t?(n=t,t=(new THREE.Color).setStyle(n)):t===+t&&(t=new THREE.Color(t)),t instanceof THREE.Color?void e.set(t.r,t.g,t.b):r.validate(t,e)}}}},e.exports=n},{}],22:[function(t,e){var n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./group"),i=t("../../util").Range,r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.traits=["object","view"],e.prototype.axis=function(t){var e;return e=this._get("view.range")[t-1]},e.prototype.to=function(){},e}(n),e.exports=r},{"../../util":48,"./group":16}],23:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../renderable"),n=function(t){function e(t,n,i){null==this.samples&&(this.samples=i.samples||1),null==this.channels&&(this.channels=i.channels||4),e.__super__.constructor.call(this,t,n),this.build()}var n;return o(e,t),n=65535,e.prototype.shader=function(t){return t.call("sample.2d",this.uniforms)},e.prototype.build=function(){return this.uniforms={dataPointer:{type:"v2",value:new THREE.Vector2}}},e.prototype.dispose=function(){return this.data=null,this.texture.dispose(),e.__super__.dispose.apply(this,arguments)},e.prototype.update=function(){return this.iterate(),this.write()},e.prototype.copy=function(t){var e,n,i;for(n=Math.min(t.length,this.samples*this.channels),e=i=0;n>=0?n>i:i>n;e=n>=0?++i:--i)this.data[e]=t[e];return this.write(n)},e.prototype.write=function(){},e.prototype.iterate=function(){},e.prototype.generate=function(){var t,e,n,i;switch(n=this.samples,t=this.data,e=!1,i=0,this.channels){case 1:return function(r){return e||(t[i++]=r||0),!(e=i>=n)};case 2:return function(r,o){return e||(t[i++]=r||0,t[i++]=o||0),!(e=i>=n)};case 3:return function(r,o,s){return e||(t[i++]=r||0,t[i++]=o||0,t[i++]=s||0),!(e=i>=n)};case 4:return function(r,o,s,a){return e||(t[i++]=r||0,t[i++]=o||0,t[i++]=s||0,t[i++]=a||0),!(e=i>=n)}}},e}(i),e.exports=n},{"../renderable":38}],24:[function(t,e){var n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./buffer"),r=t("./texture"),i=function(t){function e(t,n,i){e.__super__.constructor.call(this,t,n,i)}return s(e,t),e.prototype.build=function(){return e.__super__.build.apply(this,arguments),this.data=new Float32Array(this.samples*this.channels),this.texture=new r(this.gl,this.samples,1,this.channels),this.dataPointer=this.uniforms.dataPointer.value,this._adopt(this.texture.uniforms)},e.prototype.write=function(t){return null==t&&(t=this.samples),this.texture.write(this.data,0,0,t,1),this.dataPointer.set(.5,.5)},e}(n),e.exports=i},{"./buffer":23,"./texture":28}],25:[function(t,e,n){n.Texture=t("./texture"),n.Buffer=t("./buffer"),n.DataBuffer=t("./databuffer"),n.LineBuffer=t("./linebuffer"),n.SurfaceBuffer=t("./surfacebuffer")},{"./buffer":23,"./databuffer":24,"./linebuffer":26,"./surfacebuffer":27,"./texture":28}],26:[function(t,e){var n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./buffer"),r=t("./texture"),i=function(t){function e(t,n,i){this.callback=i.callback||function(){},this.width=i.width||1,this.history=i.history||1,this.samples=this.width,e.__super__.constructor.call(this,t,n,i)}return s(e,t),e.prototype.build=function(){return e.__super__.build.apply(this,arguments),this.data=new Float32Array(this.samples*this.channels),this.texture=new r(this.gl,this.samples,this.history,this.channels),this.index=0,this.dataPointer=this.uniforms.dataPointer.value,this._adopt(this.texture.uniforms)},e.prototype.iterate=function(){var t,e,i;for(t=this.callback,i=this.generate(),e=0;t(e++,i)&&e<n.iterationLimit;);},e.prototype.write=function(t){return null==t&&(t=this.samples),this.texture.write(this.data,0,this.index,t,1),this.dataPointer.set(.5,this.index+.5),this.index=(this.index+1)%this.history},e}(n),e.exports=i},{"./buffer":23,"./texture":28}],27:[function(t,e){var n,i,r,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./buffer"),r=t("./texture"),i=function(t){function e(t,n,i){this.callback=i.callback||function(){},this.width=i.width||1,this.height=i.height||1,this.history=i.history||1,this.channels=i.channels||4,this.samples=this.width*this.height,e.__super__.constructor.call(this,t,n,i)}return s(e,t),e.prototype.build=function(){return e.__super__.build.apply(this,arguments),this.data=new Float32Array(this.samples*this.channels),this.texture=new r(this.gl,this.width,this.height*this.history,this.channels),this.index=0,this.dataPointer=this.uniforms.dataPointer.value,this._adopt(this.texture.uniforms)},e.prototype.iterate=function(){var t,e,i,r,o,s,a;for(t=this.callback,s=this.generate(),o=this.width,e=i=r=0;++r<n.iterationLimit&&(a=t(e,i,s));)++e===o&&(e=0,i++)},e.prototype.write=function(t,e){throw null==t&&(t=this.width),null==e&&(e=this.height),"Not Implemented: passing (samples) to (width, height) write()"},e}(n),e.exports=i},{"./buffer":23,"./texture":28}],28:[function(t,e){var n;n=function(){function t(t,e,n,i){this.gl=t,this.width=e,this.height=n,this.channels=i,this.n=this.width*this.height*this.channels,this.build()}return t.prototype.build=function(){var t;return t=this.gl,this.texture=t.createTexture(),this.type=[null,t.LUMINANCE,t.LUMINANCE_ALPHA,t.RGB,t.RGBA][this.channels],t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),this.data=new Float32Array(this.n),t.pixelStorei(t.UNPACK_ALIGNMENT,1),t.texImage2D(t.TEXTURE_2D,0,this.type,this.width,this.height,0,this.type,t.FLOAT,this.data),this.textureObject=new THREE.Texture(new Image,new THREE.UVMapping,THREE.ClampToEdgeWrapping,THREE.ClampToEdgeWrapping,THREE.NearestFilter,THREE.NearestFilter),this.textureObject.__webglInit=!0,this.textureObject.__webglTexture=this.texture,this.uniforms={dataResolution:{type:"v2",value:new THREE.Vector2(1/this.width,1/this.height)},dataTexture:{type:"t",value:this.textureObject}}
},t.prototype.write=function(t,e,n,i,r){var o;return o=this.gl,o.bindTexture(o.TEXTURE_2D,this.texture),o.pixelStorei(o.UNPACK_ALIGNMENT,1),o.texSubImage2D(o.TEXTURE_2D,0,e,n,i,r,this.type,o.FLOAT,t)},t.prototype.dispose=function(){throw"Texture::dispose not yet implemented"},t}(),e.exports=n},{}],29:[function(t,e){var n;n=function(){function t(t,e,n){this.gl=t,this.classes=e,this.shaders=n}return t.prototype.getTypes=function(){return Object.keys(this.classes)},t.prototype.make=function(t,e,n){return new this.classes[t](this.gl,this.shaders,e,n)},t}(),e.exports=n},{}],30:[function(t,e){var n,i={}.hasOwnProperty,r=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=function(t){function e(){THREE.BufferGeometry.call(this)}return r(e,t),e.prototype._emitter=function(t){var e,n,i,r,o,s,a,u;return n=this.attributes[t],i=n.itemSize,e=n.array,o=0,s=function(t){return e[o++]=t},u=function(t,n){return e[o++]=t,e[o++]=n},a=function(t,n,i){return e[o++]=t,e[o++]=n,e[o++]=i},r=function(t,n,i,r){return e[o++]=t,e[o++]=n,e[o++]=i,e[o++]=r},[null,s,u,a,r][i]},e}(THREE.BufferGeometry),e.exports=n},{}],31:[function(t,e,n){n.Geometry=t("./geometry"),n.LineGeometry=t("./linegeometry")},{"./geometry":30,"./linegeometry":32}],32:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=t("./geometry"),i=function(t){function e(t){var e,n,i,r,o,s,a,u,c,l,p,h,f,d,m,v,y,g,_,x,b,w,E;for(THREE.BufferGeometry.call(this),this.samples=h=+t.samples||2,this.strips=d=+t.strips||1,this.ribbons=p=+t.ribbons||1,this.segments=f=h-1,u=h*d*p*2,l=f*d*p,m=2*l,this.addAttribute("index",Uint16Array,3*m,1),this.addAttribute("position",Float32Array,u,3),this.addAttribute("line",Float32Array,u,2),r=this._emitter("index"),c=this._emitter("position"),a=this._emitter("line"),e=0,i=g=0;p>=0?p>g:g>p;i=p>=0?++g:--g)for(o=_=0;d>=0?d>_:_>d;o=d>=0?++_:--_){for(s=x=0;f>=0?f>x:x>f;s=f>=0?++x:--x)r(e),r(e+1),r(e+2),r(e+2),r(e+1),r(e+3),e+=2;e+=2}for(y=0,i=b=0;p>=0?p>b:b>p;i=p>=0?++b:--b){for(v=0,o=w=0;d>=0?d>w:w>d;o=d>=0?++w:--w)for(s=E=0;h>=0?h>E:E>h;s=h>=0?++E:--E)n=0===s?-1:s===f?1:0,c(v,y,0),c(v,y,0),a(n,1),a(n,-1),v++;y++}this.clip(0,l)}return o(e,t),e.prototype.shaderAttributes=function(){return{line:{type:"v2",value:null}}},e.prototype.clip=function(t,e){return this.offsets=[{start:6*t,count:6*(e-t)}]},e}(n),e.exports=i},{"./geometry":30}],33:[function(t,e,n){var i;i=t("./types"),n.Scene=t("./scene"),n.Factory=t("./factory"),n.Renderable=t("./scene"),n.Classes=i.Classes},{"./factory":29,"./scene":39,"./types":40}],34:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../renderable"),n=function(t){function e(t,n,i){e.__super__.constructor.call(this,t,n),this.geometry=new THREE.PlaneGeometry(1,1),this.material=new THREE.MeshBasicMaterial({map:i.map}),this.object=new THREE.Mesh(this.geometry,this.material),this.object.frustumCulled=!1}return o(e,t),e.prototype.dispose=function(){return this.geometry.dispose(),this.material.dispose(),this.object=this.geometry=this.material=null,e.__super__.dispose.apply(this,arguments)},e}(i),e.exports=n},{"../renderable":38}],35:[function(t,e,n){n.mesh=t("./mesh"),n.Line=t("./line"),n.Debug=t("./debug")},{"./debug":34,"./line":36,"./mesh":37}],36:[function(t,e){var n,i,r,o,s,a={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s="\n/*\n//Data sampler\n\nuniform sampler2D dataTexture;\nuniform vec2 dataResolution;\nuniform vec2 dataPointer;\n\nvec2 mapUV(vec2 xy) {\n  return vec2(xy.y, 0);\n}\n\nvec4 sampleData(vec2 xy) {\n  vec2 uv = fract((mapUV(xy) + dataPointer) * dataResolution);\n  vec4 sample = texture2D(dataTexture, uv);\n  return transformData(uv, sample);\n}\n\n*/\n\n/*\n// Grid\nuniform vec2 gridRange;\nuniform vec4 gridAxis;\nuniform vec4 gridOffset;\n\nvec4 transformData(vec2 uv, vec4 data) {\n  return vec4(data.r, 0, 0, 0) + gridAxis * uv.x + gridOffset;\n}\n*/\n\n/*\n// Axis\n*/\nuniform vec4 axisStep;\nuniform vec4 axisPosition;\n\nvec4 sampleData(vec2 uv) {\n  return axisStep * uv.x + axisPosition;\n}\n\n/*\n// Viewport\n*/\nuniform mat4 cartesianMatrix;\n\nvec4 cartesian(vec4 position) {\n//  return cartesianMatrix * vec4(position.xyz, 1.0);\n  return vec4(position.xyz, 1.0);\n}\n\n/*\nvec4 cartesian4(vec4 position) {\n  return cartesian4Matrix * position;\n}\n*/\n\n/*\n// Pipeline\n*/\nvec3 worldToView(vec4 position) {\n  return (modelViewMatrix * vec4(position.xyz, 1.0)).xyz;\n}\n\nvec3 transformToView(vec4 position) {\n  return worldToView(cartesian(position));\n}\n\nvec3 samplePosition(vec2 xy) {\n  vec4 sample = sampleData(xy);\n  return transformToView(sample);\n}\n\n\n/*\n//Line\n*/\n\nvoid getLineGeometry(vec2 xy, float edge, inout vec3 left, inout vec3 center, inout vec3 right) {\n  vec2 step = vec2(1.0, 0.0);\n\n  center = samplePosition(xy);\n  left = (edge < -0.5) ? center : samplePosition(xy - step);\n  right = (edge > 0.5) ? center : samplePosition(xy + step);\n}\n\nvec3 getLineJoin(float edge, vec3 left, vec3 center, vec3 right) {\n  vec3 bitangent;\n  vec3 normal = center;\n\n  vec3 legLeft = center - left;\n  vec3 legRight = right - center;\n\n  if (edge > 0.5) {\n    bitangent = normalize(cross(normal, legLeft));\n  }\n  else if (edge < -0.5) {\n    bitangent = normalize(cross(normal, legRight));\n  }\n  else {\n    vec3 joinLeft = normalize(cross(normal, legLeft));\n    vec3 joinRight = normalize(cross(normal, legRight));\n    float dotLR = dot(joinLeft, joinRight);\n    float scale = min(8.0, tan(acos(dotLR * .999) * .5) * .5);\n    bitangent = normalize(joinLeft + joinRight) * sqrt(1.0 + scale * scale);\n  }\n  \n  return bitangent;\n}\n\nuniform float lineWidth;\nattribute vec2 line;\n//attribute vec3 position;\n\nvec3 getLinePosition() {\n  vec3 left, center, right, join;\n\n  float edge = line.x;\n  float offset = line.y;\n\n  getLineGeometry(position.xy, edge, left, center, right);\n  join = getLineJoin(edge, left, center, right);\n  return center + join * offset * lineWidth;\n}\n\n////\n\nvoid projectPosition(vec3 point) {\n	vec4 glPosition = projectionMatrix * vec4(point, 1.0);\n  gl_Position = glPosition;\n}\n\nvoid main() {\n  vec3 position = getLinePosition();\n  projectPosition(position);\n}",o="uniform vec3 lineColor;\nuniform float lineOpacity;\n\nvoid main() {\n	gl_FragColor = vec4(lineColor, lineOpacity);\n}",r=t("./mesh"),i=t("../geometry").LineGeometry,n=function(t){function e(t,n,r){var o,s,a,u,c,l;e.__super__.constructor.call(this,t,n),u=null!=(l=r.uniforms)?l:{},a=r.position,this.geometry=new i({samples:r.samples||2,strips:r.strips||1,ribbons:r.ribbons||1}),s=n.material(),c=s.vertex,a&&c["import"](a),c.call("line.position",u),c.call("project.position"),o=s.fragment,o.call("line.color",u),this.material=new THREE.ShaderMaterial(s.build({side:THREE.DoubleSide,defaultAttributeValues:null})),window.material=this.material,this.object=new THREE.Mesh(this.geometry,this.material),this.object.frustumCulled=!1}return u(e,t),e.prototype.dispose=function(){return this.geometry.dispose(),this.material.dispose(),this.object=this.geometry=this.material=null,e.__super__.dispose.apply(this,arguments)},e}(r),e.exports=n},{"../geometry":31,"./mesh":37}],37:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};i=t("../renderable"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return o(e,t),e.prototype.show=function(t){return this.object.visible=!0,this.object.material.transparent=t},e.prototype.hide=function(){return this.object.visible=!1},e}(i),e.exports=n},{"../renderable":38}],38:[function(t,e){var n;n=function(){function t(t,e){this.gl=t,this.shaders=e,null==this.uniforms&&(this.uniforms={})}return t.prototype.dispose=function(){return this.uniforms=null},t.prototype._adopt=function(t){var e,n;for(e in t)n=t[e],this.uniforms[e]=n},t.prototype._set=function(t){var e,n;for(e in t)n=t[e],null!=this.uniforms[e]&&(this.uniforms[e].value=n)},t}(),e.exports=n},{}],39:[function(t,e){var n,i,r={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=function(t){function e(){THREE.Object3D.apply(this)}return o(e,t),e}(THREE.Object3D),i=function(){function t(t){this.scene=t,this.root=new n}return t.prototype.getRoot=function(){return this.root},t.prototype.inject=function(){return this.scene.add(this.root)},t.prototype.unject=function(){return this.scene.remove(this.root)},t.prototype.add=function(t){return this.root.add(t)},t.prototype.remove=function(t){return this.root.remove(t)},t}(),e.exports=i},{}],40:[function(t,e,n){var i;i={line:t("./meshes").Line,debug:t("./meshes").Debug,databuffer:t("./buffer").DataBuffer,linebuffer:t("./buffer").LineBuffer,surfacebuffer:t("./buffer").SurfaceBuffer},n.Classes=i},{"./buffer":25,"./meshes":35}],41:[function(t,e){var n;n=function(t){return new ShaderGraph(t)},e.exports=n},{}],42:[function(t,e,n){n.Factory=t("./factory"),n.Snippets=MathBox.Shaders},{"./factory":41}],43:[function(t,e){var n;n=function(){function t(t){this.model=t}return t.prototype.update=function(){},t}(),e.exports=n},{}],44:[function(t,e){var n;n=function(){function t(t,e,n,i,r){var o,s,a,u;for(this._controller=t,this._animator=e,this._director=n,this._up=i,this._target=r,u=this._controller.getTypes(),s=0,a=u.length;a>s;s++)o=u[s],"root"!==o&&"group"!==o&&!function(t){return function(e){return t[e]=function(n){return t.add(e,n)}}}(this)(o);this._model=this._controller.model}return t.prototype.add=function(t,e){var n,i,r,o;return n=this._controller.make(t,e),r=null!=(o=this.target)?o:this._controller.getRoot(),n.children||r!==this._controller.getRoot()||(r=function(){var t,e,n,o;for(n=r.children,o=[],t=0,e=n.length;e>t;t++)i=n[t],null!=i.children&&o.push(i);return o}()[0]||r),this._controller.add(n,r),n.children?this.push(n):this},t.prototype.push=function(e){return new t(this._controller,this._animator,this._director,this,e)},t.prototype.end=function(){var t;return null!=(t=this._up)?t:this},t.prototype.reset=function(){return push({target:void 0})},t}(),e.exports=n},{}],45:[function(t,e){var n;n=function(){function t(t,e,n){this.model=t,this.scene=e,this.factory=n,this.render=function(t){return function(e){return t.scene.add(e.renderable.object)}}(this),this.unrender=function(t){return function(e){return t.scene.remove(e.renderable.object)}}(this)}return t.prototype.getRoot=function(){return this.model.getRoot()},t.prototype.getTypes=function(){return this.factory.getTypes()},t.prototype.make=function(t,e){return this.factory.make(t,e)},t.prototype.add=function(t,e){return null==e&&(e=this.model.getRoot()),t.primitive.on("render",this.render),t.primitive.on("unrender",this.unrender),e.add(t)},t.prototype.remove=function(t){var e;return e=t.parent||this.model.getRoot(),e.remove(t),t.primitive.off("render",this.render),t.primitive.off("unrender",this.unrender)},t}(),e.exports=n},{}],46:[function(t,e){var n;n=function(){function t(t,e){this.model=t,this.script=e}return t}(),e.exports=n},{}],47:[function(t,e,n){n.Animator=t("./animator"),n.API=t("./api"),n.Controller=t("./controller"),n.Director=t("./director")},{"./animator":43,"./api":44,"./controller":45,"./director":46}],48:[function(t,e,n){n.Ticks=t("./ticks")},{"./ticks":49}],49:[function(t,e,n){var i,r,o;i=function(t,e,n,i,r,o,s){var a,u,c,l,p,h,f,d,m,v,y,g;for(n||(n=10),s||(s=0),d=e-t,h=d/n,i||(i=1),r||(r=10),f=i*(s+Math.pow(r,Math.floor(Math.log(h/i)/Math.log(r)))),l=r%2===0?[r/2,1,.5]:r%3===0?[r/3,1,1/3]:[1],v=function(){var t,e,n;for(n=[],t=0,e=l.length;e>t;t++)c=l[t],n.push(f*c);return n}(),a=1/0,m=v.reduce(function(t,e){var n;return n=Math.abs(e-h),a>n?(a=n,e):t},f),u=+!o,t=(Math.ceil(t/m)+u)*m,e=(Math.floor(e/m)-u)*m,n=Math.ceil((e-t)/m),g=[],p=y=0;n>=0?n>=y:y>=n;p=n>=0?++y:--y)g.push(t+p*m);return g},r=function(){throw"Log ticks not yet implemented."},o=function(t,e,n,o,s,a,u,c){switch(t){case"linear":return i(e,n,o,s,a,u,c);case"log":return r(e,n,o,s,a,u,c)}},n.make=o,n.linear=i,n.log=r},{}]},{},[3]);