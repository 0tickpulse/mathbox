!function t(r,n,e){function o(u,c){if(!n[u]){if(!r[u]){var s="function"==typeof require&&require;if(!c&&s)return s(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var p=n[u]={exports:{}};r[u][0].call(p.exports,function(t){var n=r[u][1][t];return o(n?n:t)},p,p.exports,t,r,n,e)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(t,r,n){var e,o,i,u;u=t("./stage"),i=t("./render"),o=t("./primitives"),e=function(){function t(t,r,n){null==n&&(n=[]),this.factory=new o.Factory,this.model=new u.Model(this.factory.make("root"),r),this.animator=new u.Animator(this.model),this.controller=new u.Controller(this.model),this.director=new u.Director(this.controller,this.animator,n),this.scene=new i.Scene(t,r),this.api=new u.API(this.controller,this.animator,this.director,this.factory)}return t.prototype.init=function(){return this.scene.init()},t.prototype.destroy=function(){return this.scene.destroy(),this.model=this.animator=this.controller=this.director=this.factory=this.api=null},t.prototype.update=function(){return this.animator.update()},t}(),n.Context=e},{"./primitives":4,"./render":10,"./stage":17}],2:[function(t,r,n){var e,o;n.version="2",o=function(t){var r;return null==t&&(t={}),null==t.plugins&&(t.plugins=["core","mathbox"]),r=THREE.Bootstrap(t),r.mathbox},e=t("./context").Context,THREE.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0},listen:["ready","update"],install:function(t){return t.MathBox={init:function(r){return function(n){var o,i,u;return i=(null!=n?n.scene:void 0)||r.options.scene||t.scene,o=(null!=n?n.camera:void 0)||r.options.camera||t.camera,u=(null!=n?n.script:void 0)||r.options.script,r.context=new e(i,o,u),r.context.api.three=t,t.mathbox=r.context.api}}(this),destroy:function(r){return function(){return delete t.mathbox,delete r.context.api.three,delete r.context}}(this)}},uninstall:function(t){return t.MathBox.destroy(),delete t.MathBox},ready:function(t,r){return this.options.init?r.MathBox.init():void 0},update:function(){var t;return null!=(t=this.context)?t.update():void 0}}),n.mathBox=o,"undefined"!=typeof window&&null!==window&&(window.mathBox=o,window.MathBox=n)},{"./context":1}],3:[function(t,r,n){var e,o;o=t("./types").types,e=function(){function t(){this.types=o}return t.prototype.getTypes=function(){return Object.keys(this.types)},t.prototype.make=function(t,r){return new this.types[t](r)},t}(),n.Factory=e},{"./types":6}],4:[function(t,r,n){n.Factory=t("./factory").Factory,n.Primitive=t("./primitive").Primitive},{"./factory":3,"./primitive":5}],5:[function(t,r,n){var e,o,i={}.hasOwnProperty,u=function(t,r){function n(){this.constructor=t}for(var e in r)i.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};e=function(){function t(){}return t}(),o=function(t){function r(){this.children=[],r.__super__.constructor.apply(this,arguments)}return u(r,t),r.prototype.add=function(t){return this.children.push(t)},r.prototype.remove=function(t){var r;return this.children=function(){var n,e,o,i;for(o=this.children,i=[],n=0,e=o.length;e>n;n++)r=o[n],r!==t&&i.push(r);return i}.call(this)},r}(e),n.Primitive=e,n.PrimitiveGroup=o},{}],6:[function(t,r,n){var e;e={grid:t("./types/grid").primitive,root:t("./types/root").primitive,viewport:t("./types/viewport").primitive},n.types=e},{"./types/grid":7,"./types/root":8,"./types/viewport":9}],7:[function(t,r,n){var e,o,i={}.hasOwnProperty,u=function(t,r){function n(){this.constructor=t}for(var e in r)i.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};o=t("../primitive").Primitive,e=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return u(r,t),r}(o),n.primitive=e},{"../primitive":5}],8:[function(t,r,n){var e,o,i={}.hasOwnProperty,u=function(t,r){function n(){this.constructor=t}for(var e in r)i.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};e=t("../primitive").PrimitiveGroup,o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return u(r,t),r}(e),n.primitive=o},{"../primitive":5}],9:[function(t,r,n){var e,o,i={}.hasOwnProperty,u=function(t,r){function n(){this.constructor=t}for(var e in r)i.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t};e=t("../primitive").PrimitiveGroup,o=function(t){function r(){return r.__super__.constructor.apply(this,arguments)}return u(r,t),r}(e),n.primitive=o},{"../primitive":5}],10:[function(t,r,n){n.Scene=t("./scene").Scene,n.Render=t("./render").Render},{"./render":11,"./scene":12}],11:[function(t,r,n){var e;e=function(){function t(){}return t}(),n.Render=e},{}],12:[function(t,r,n){var e;e=function(){function t(t,r){this.scene=t,this.camera=r,this.renderTree=new THREE.Object3D}return t.prototype.init=function(){return this.scene.add(this.renderTree)},t.prototype.destroy=function(){return this.scene.remove(this.renderTree)},t}(),n.Scene=e},{}],13:[function(t,r,n){var e;e=function(){function t(t){this.model=t}return t.prototype.update=function(){},t}(),n.Animator=e},{}],14:[function(t,r,n){var e;e=function(){function t(t,r,n,e){this._controller=t,this._animator=r,this._director=n,this._factory=e,this._factory.getTypes().forEach(function(t){return function(r){return t[r]=function(n){var e;return e=t._factory.make(r,n),t._controller=t._controller.add(e)}}}(this))}return t.prototype.end=function(){return this._controller.pop()},t}(),n.API=e},{}],15:[function(t,r,n){var e;e=function(){function t(t,r,n,e){this.model=t,this.director=r,this.previous=n,this.target=null!=e?e:this.model.getRoot(),console.log("ctor",this.target)}return t.prototype.add=function(t){return this.target.add(t),console.log("add",this.target,t,t.children),t.children?this.push(t):this},t.prototype.push=function(r){return new t(this.model,this.director,this,r)},t.prototype.pop=function(){var t;return null!=(t=this.previous)?t:this},t}(),n.Controller=e},{}],16:[function(t,r,n){var e;e=function(){function t(t,r){this.model=t,this.script=r}return t}(),n.Director=e},{}],17:[function(t,r,n){n.Animator=t("./animator").Animator,n.API=t("./api").API,n.Controller=t("./controller").Controller,n.Director=t("./director").Director,n.Model=t("./model").Model},{"./animator":13,"./api":14,"./controller":15,"./director":16,"./model":18}],18:[function(t,r,n){var e;e=function(){function t(t,r){this.root=t,this.camera=r}return t.prototype.getRoot=function(){return this.root},t}(),n.Model=e},{}]},{},[2]);