!function t(n,r,e){function o(u,c){if(!r[u]){if(!n[u]){var a="function"==typeof require&&require;if(!c&&a)return a(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+u+"'")}var s=r[u]={exports:{}};n[u][0].call(s.exports,function(t){var r=n[u][1][t];return o(r?r:t)},s,s.exports,t,n,r,e)}return r[u].exports}for(var i="function"==typeof require&&require,u=0;u<e.length;u++)o(e[u]);return o}({1:[function(t,n,r){var e,o,i,u;u=t("./stage"),i=t("./render"),o=t("./primitives"),e=function(){function t(t,n,r){null==r&&(r=[]),this.factory=new o.Factory,this.model=new u.Model(this.factory.make("root"),n),this.animator=new u.Animator(this.model),this.controller=new u.Controller(this.model),this.director=new u.Director(this.controller,this.animator,r),this.scene=new i.Scene(t,n),this.api=new u.API(this.controller,this.animator,this.director,this.factory)}return t.prototype.init=function(){return this.scene.init()},t.prototype.destroy=function(){return this.scene.destroy(),this.model=this.animator=this.controller=this.director=this.factory=this.api=null},t.prototype.update=function(){return this.animator.update()},t}(),r.Context=e},{"./primitives":5,"./render":13,"./stage":20}],2:[function(t,n,r){var e,o;o=function(t){var n;return null==t&&(t={}),null==t.plugins&&(t.plugins=["core","mathbox"]),n=THREE.Bootstrap(t),n.mathbox},window.MathBox=r,window.mathBox=r.mathBox=o,r.version="2",e=t("./context").Context,THREE.Bootstrap.registerPlugin("mathbox",{defaults:{init:!0},listen:["ready","update"],install:function(t){return t.MathBox={init:function(n){return function(r){var o,i,u;return i=(null!=r?r.scene:void 0)||n.options.scene||t.scene,o=(null!=r?r.camera:void 0)||n.options.camera||t.camera,u=(null!=r?r.script:void 0)||n.options.script,n.context=new e(i,o,u),n.context.api.three=t,t.mathbox=n.context.api}}(this),destroy:function(n){return function(){return delete t.mathbox,delete n.context.api.three,delete n.context}}(this)}},uninstall:function(t){return t.MathBox.destroy(),delete t.MathBox},ready:function(t,n){return this.options.init?n.MathBox.init():void 0},update:function(){var t;return null!=(t=this.context)?t.update():void 0}})},{"./context":1}],3:[function(t,n,r){var e,o,i;e=function(){function t(t,n){var r,e,i,u,c,a,s,l,f,p,h,d,v,y;for(null==n&&(n=[]),r=function(t){return function(n){return null!=n?t[n]:t}}(this),a=function(t){return function(n,r){var e;return e=f(n,r,t[n]),null!=e?t[n]=e:void 0}}(this),t.get=r,t.set=function(t,n){var r;if(arguments.length>=2)a(t,n);else{r=t;for(t in r)n=r[t],a(t,n)}},i={},p={},f=function(t,n,r){return p[t](n,r)},t.validate=function(t,n){var r,e,o;return r=i[t],null!=r&&(o=r()),e=f(t,n,o),null!=e?e:o},h={},d=0,v=n.length;v>d;d++){l=n[d],y=l.split(":"),l=y[0],u=y[1],null==u&&(u=l),s=o[l];for(e in s)c=s[e],e=[u,e].join("."),this[e]=c.make(),i[e]=c.make,p[e]=c.validate}}return t}(),e.Types=i={array:function(t,n){return{make:function(){var r,e,o;for(o=[],r=e=0;n>=0?n>e:e>n;r=n>=0?++e:--e)o.push(t.make());return o},validate:function(r,e){var o,i,u,c,a,s;if(null!=r.constructor&&r.constructor===Array)for(e.length=n?n:r.length,o=u=0,a=e.length;a>=0?a>u:u>a;o=a>=0?++u:--u)i=t.validate(r[o],e[o]),null!=i&&(e[o]=i);else for(e.length=n,o=c=0,s=e.length;s>=0?s>=c:c>=s;o=s>=0?++c:--c)e[o]=t.value}}},bool:function(t){return{make:function(){return!!t},validate:function(t){return!!t}}},number:function(t){return null==t&&(t=0),{make:function(){return+t},validate:function(t){return+t||0}}},string:function(t){return null==t&&(t=""),{make:function(){return""+t},validate:function(t){return""+t}}},scale:function(t){return new i.string(t)},vec2:function(t,n){return null==t&&(t=0),null==n&&(n=0),{make:function(){return new THREE.Vector2(t,n)},validate:function(r,e){var o,i;r instanceof THREE.Vector2?e.copy(r):(null!=r?r.constructor:void 0)===Array?e.set(null!=(o=r[0])?o:t,null!=(i=r[1])?i:n):e.set(t,n)}}},vec3:function(t,n,r){return null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),{make:function(){return new THREE.Vector3(t,n,r)},validate:function(e,o){var i,u,c;e instanceof THREE.Vector3?o.copy(e):(null!=e?e.constructor:void 0)===Array?o.set(null!=(i=e[0])?i:t,null!=(u=e[1])?u:n,null!=(c=e[2])?c:r):o.set(t,n,r)}}},vec4:function(t,n,r,e){return null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==e&&(e=0),{make:function(){return new THREE.Vector4(t,n,r,e)},validate:function(o,i){var u,c,a,s;o instanceof THREE.Vector4?i.copy(o):(null!=o?o.constructor:void 0)===Array?i.set(null!=(u=o[0])?u:t,null!=(c=o[1])?c:n,null!=(a=o[2])?a:r,null!=(s=o[3])?s:e):i.set(t,n,r,e)}}},quat:function(t,n,r,e){var o;return null==t&&(t=0),null==n&&(n=0),null==r&&(r=0),null==e&&(e=1),o=i.vec4(t,n,r,e),{make:function(){return new THREE.Quaternion},validate:function(t,n){var r;return t instanceof THREE.Quaternion?n.copy(t):r=o.validate(t,n),(null!=r?r:n).normalize(),r}}},color:function(t,n,r){var e;return null==t&&(t=.5),null==n&&(n=.5),null==r&&(r=.5),e=i.vec3(t,n,r),{make:function(){return new THREE.Vector3},validate:function(t,n){return t===+t&&(t=new THREE.Color(t)),t instanceof THREE.Color?void n.set(t.r,t.g,t.b):e.validate(t,n)}}}},e.Traits=o={object:{position:i.vec4(),rotation:i.quat(),scale:i.vec4(1,1,1,1)},line:{width:i.number(1),color:i.color()},surface:{color:i.color()},view:{range:i.array(i.vec2(-1,1),4)},grid:{axes:i.array(i.vec2(0,1),2)},axis:{inherit:i.bool(),ticks:i.number(10),unit:i.number(1),base:i.number(10),detail:i.number(2),scale:i.scale()}},r.Attributes=e},{}],4:[function(t,n,r){var e,o;o=t("./types").types,e=function(){function t(){this.types=o}return t.prototype.getTypes=function(){return Object.keys(this.types)},t.prototype.make=function(t,n){return new this.types[t](n)},t}(),r.Factory=e},{"./types":7}],5:[function(t,n,r){r.Factory=t("./factory").Factory,r.Primitive=t("./primitive").Primitive},{"./factory":4,"./primitive":6}],6:[function(t,n,r){var e,o;e=t("./attributes").Attributes,o=function(){function t(t){this.attributes=new e(this,this.traits),this.set(t)}return t.prototype.extend=function(){return null==this.traits&&(this.traits=[]),this.traits=[].concat.apply(this.traits,arguments)},t}(),r.Primitive=o},{"./attributes":3}],7:[function(t,n,r){var e;e={grid:t("./types/grid").Grid,root:t("./types/root").Root,view:t("./types/view").View,cartesian:t("./types/cartesian").Cartesian},r.types=e},{"./types/cartesian":8,"./types/grid":9,"./types/root":11,"./types/view":12}],8:[function(t,n,r){var e,o,i={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var e in n)i.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};o=t("./view").View,e=function(t){function n(t){n.__super__.constructor.call(this,t)}return u(n,t),n}(o),r.Cartesian=e},{"./view":12}],9:[function(t,n,r){var e,o,i={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var e in n)i.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};o=t("../primitive").Primitive,e=function(t){function n(t){this.extend("line","object","view","grid","axis:axis1","axis:axis2"),n.__super__.constructor.call(this,t)}return u(n,t),n}(o),r.Grid=e},{"../primitive":6}],10:[function(t,n,r){var e,o,i={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var e in n)i.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};o=t("../primitive").Primitive,e=function(t){function n(t){this.children=[],n.__super__.constructor.call(this,t)}return u(n,t),n.prototype.add=function(t){return this.children.push(t)},n.prototype.remove=function(t){var n;return this.children=function(){var r,e,o,i;for(o=this.children,i=[],r=0,e=o.length;e>r;r++)n=o[r],n!==t&&i.push(n);return i}.call(this)},n}(o),r.Group=e},{"../primitive":6}],11:[function(t,n,r){var e,o,i={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var e in n)i.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};e=t("./group").Group,o=function(t){function n(t){n.__super__.constructor.call(this,t)}return u(n,t),n}(e),r.Root=o},{"./group":10}],12:[function(t,n,r){var e,o,i={}.hasOwnProperty,u=function(t,n){function r(){this.constructor=t}for(var e in n)i.call(n,e)&&(t[e]=n[e]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t};e=t("./group").Group,o=function(t){function n(t){this.extend("object","view"),n.__super__.constructor.call(this,t)}return u(n,t),n}(e),r.View=o},{"./group":10}],13:[function(t,n,r){r.Scene=t("./scene").Scene,r.Render=t("./render").Render},{"./render":14,"./scene":15}],14:[function(t,n,r){var e;e=function(){function t(){}return t}(),r.Render=e},{}],15:[function(t,n,r){var e;e=function(){function t(t,n){this.scene=t,this.camera=n,this.renderTree=new THREE.Object3D}return t.prototype.init=function(){return this.scene.add(this.renderTree)},t.prototype.destroy=function(){return this.scene.remove(this.renderTree)},t}(),r.Scene=e},{}],16:[function(t,n,r){var e;e=function(){function t(t){this.model=t}return t.prototype.update=function(){},t}(),r.Animator=e},{}],17:[function(t,n,r){var e;e=function(){function t(t,n,r,e,o,i){var u,c;this._controller=t,this._animator=n,this._director=r,this._factory=e,this._up=o,null==i&&(i={}),this._factory.getTypes().forEach(function(t){return function(n){return t[n]=function(r){return t.add(n,r)}}}(this));for(u in i)c=i[u],this[u]=c;this._model=this._controller.model}return t.prototype.add=function(t,n){var r,e;return r=this._factory.make(t,n),this._controller.add(r,this.target),e={target:r},r.children?this.push(e):this},t.prototype.push=function(n){return new t(this._controller,this._animator,this._director,this._factory,this,n)},t.prototype.end=function(){var t;return null!=(t=this._up)?t:this},t.prototype.reset=function(){return push({target:void 0})},t}(),r.API=e},{}],18:[function(t,n,r){var e;e=function(){function t(t,n){this.model=t,this.director=n}return t.prototype.add=function(t,n){return null==n&&(n=this.model.getRoot()),!t.children&&n===this.model.getRoot()&&n.children.length&&(n=n.children[0]),n.add(t)},t}(),r.Controller=e},{}],19:[function(t,n,r){var e;e=function(){function t(t,n){this.model=t,this.script=n}return t}(),r.Director=e},{}],20:[function(t,n,r){r.Animator=t("./animator").Animator,r.API=t("./api").API,r.Controller=t("./controller").Controller,r.Director=t("./director").Director,r.Model=t("./model").Model},{"./animator":16,"./api":17,"./controller":18,"./director":19,"./model":21}],21:[function(t,n,r){var e;e=function(){function t(t,n){this.root=t,this.camera=n}return t.prototype.getRoot=function(){return this.root},t}(),r.Model=e},{}]},{},[2]);