<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>MathBox - 4D Stereographic</title>
  <script src="../../build/mathbox-bundle.js"></script>
</head>
<body>
  <script>
    mathbox = mathBox({
      plugins: ['core', 'controls', 'cursor'],
      controls: {
        klass: THREE.OrbitControls
      },
    });
    three = mathbox.three;

    three.camera.position.set(2.3, 1, 2);
    three.renderer.setClearColor(new THREE.Color(0xFFFFFF), 1.0);

    time = 0
    three.on('update', function () {
      time = three.Time.now
      time = 0
      q1 = new THREE.Quaternion();
      q2 = new THREE.Quaternion();
      three.on('update', function () {
        time = three.Time.now

        q1.x = Math.cos(time * .123);
        q1.y = Math.cos(time * .224 - 1);
        q1.z = Math.cos(time * .161 + 1);
        q1.w = Math.cos(time * .193 + 2);
        q1.normalize();

        q2.slerp(q1, .05);

        view.set('rotation', q2);
        view.set('position', [q1.x, q1.y, q1.z, q1.w]);
      });
    });

    view = mathbox.stereographic4({
      range: [[-4, 4], [-4, 4], [-4, 4], [-1, 1]],
      scale: [4, 4, 4, 1],
    }).group();

    ///

    view.group({
      position: [1, 0, 0, 0],
    })
    .grid({
      axes: [2, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [3, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [2, 3],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

    ///

    view.group({
      position: [0, 1, 0, 0],
    })
    .grid({
      axes: [1, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [3, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [1, 3],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

    ///

    view.group({
      position: [0, 0, 1, 0],
    })
    .grid({
      axes: [1, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [2, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [1, 2],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

    ///

    view.group({
      position: [-1, 0, 0, 0],
    })
    .grid({
      axes: [2, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [3, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [2, 3],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

    ///

    view.group({
      position: [0, -1, 0, 0],
    })
    .grid({
      axes: [1, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [3, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [1, 3],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

    ///

    view.group({
      position: [0, 0, -1, 0],
    })
    .grid({
      axes: [1, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [2, 4],
      detailX: 63,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    })
    .grid({
      axes: [1, 2],
      detailX: 31,
      detailY: 31,
      width: 0.002,
      opacity: .5,
      zBias: -60,
    });

  </script>
</body>
</html>
